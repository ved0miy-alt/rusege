<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ï–ì–≠ ‚Äî –£–¥–∞—Ä–µ–Ω–∏–µ: –≤—Å–µ –±—É–∫–≤—ã –∑–∞–≥–ª–∞–≤–Ω—ã–µ</title>
    <style>
        * {
            box-sizing: border-box;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        }
        body {
            margin: 0;
            background: #000000;
            color: #ffffff;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            min-height: 100vh;
        }
        .top {
            text-align: center;
            padding: 16px 20px;
        }
        .top button {
            background: #1c1c1e;
            color: white;
            border: none;
            padding: 8px 24px;
            border-radius: 30px;
            font-size: 1rem;
            font-weight: 500;
            letter-spacing: 0.3px;
            cursor: pointer;
            border: 1px solid #333;
        }
        .word {
            text-align: center;
            font-size: 4rem;          /* –±–∞–∑–æ–≤—ã–π –∫—Ä—É–ø–Ω—ã–π —Ä–∞–∑–º–µ—Ä ‚Äì –Ω–µ —É–º–µ–Ω—å—à–∞–µ–º */
            font-weight: 500;
            letter-spacing: 12px;       /* –Ω–∞—á–∞–ª—å–Ω—ã–π –∏–Ω—Ç–µ—Ä–≤–∞–ª */
            white-space: nowrap;         /* —Å—Ç—Ä–æ–≥–æ –æ–¥–Ω–∞ —Å—Ç—Ä–æ–∫–∞ */
            overflow: hidden;            /* —Å–∫—Ä—ã–≤–∞–µ–º –ª–∏—à–Ω–µ–µ, –µ—Å–ª–∏ –Ω–µ –≤–ª–µ–∑–∞–µ—Ç */
            max-width: 100%;
            padding: 20px 10px;
            transition: letter-spacing 0.1s ease; /* —Ç–æ–ª—å–∫–æ –º–µ–∂–±—É–∫–≤–µ–Ω–Ω–æ–µ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ */
        }
        .letter {
            display: inline-block;
            padding: 12px 16px;
            margin: 0 4px;
            cursor: pointer;
            border-radius: 60px;
            transition: 0.2s;
            user-select: none;
        }
        .active {
            background: #2AABEE;
            border-radius: 50%;
            color: white;
            font-weight: 600;
            box-shadow: 0 0 12px #2AABEE;
        }
        .wrong-highlight {
            background: #ff453a;
            border-radius: 50%;
            color: white;
            font-weight: 600;
            box-shadow: 0 0 12px #ff453a;
        }
        .bottom {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px 20px 30px;
            gap: 12px;
            flex-wrap: wrap;
        }
        .score {
            background: #1c1c1e;
            padding: 15px;
            border-radius: 50%;
            width: 70px;
            height: 70px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.6rem;
            font-weight: bold;
            color: #2AABEE;
            border: 2px solid #2a2a2c;
        }
        .input-box {
            flex: 2 1 200px;
        }
        .input-box input {
            width: 100%;
            padding: 15px 20px;
            border-radius: 40px;
            border: none;
            background: #1c1c1e;
            color: white;
            text-align: center;
            font-size: 1.1rem;
            border: 1px solid #3a3a3c;
        }
        .input-box input::placeholder {
            color: #8e8e93;
        }
        .input-box input:focus {
            outline: 2px solid #2AABEE;
        }
        .menu {
            background: #1c1c1e;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 26px;
            color: #2AABEE;
            border: 2px solid #3a3a3c;
            cursor: pointer;
            transition: 0.2s;
        }
        .menu:hover {
            background: #2c2c2e;
        }
        .hint-text {
            color: #8e8e93;
            font-size: 0.9rem;
            padding: 0 20px 10px;
            text-align: center;
            letter-spacing: 0.5px;
        }
        .message {
            color: #2AABEE;
            font-size: 1rem;
            text-align: center;
            min-height: 24px;
            font-weight: 400;
        }
    </style>
</head>
<body>

<div class="top">
    <button>üéì –ï–ì–≠ ‚Äî –æ—Ä—Ñ–æ—ç–ø–∏—è (–í–°–ï –ó–ê–ì–õ–ê–í–ù–´–ï)</button>
</div>

<div class="word" id="word"></div>
<div class="message" id="message"></div>

<div class="bottom">
    <div class="score" id="score">0</div>
    <div class="input-box">
        <input type="text" id="answerInput" placeholder="üî§ –Ω–æ–º–µ—Ä —É–¥–∞—Ä–Ω–æ–π –±—É–∫–≤—ã (1,2,3...)">
    </div>
    <div class="menu" id="nextBtn">‚Üª</div>
</div>
<div class="hint-text">‚Ä¢ –í—Å–µ –±—É–∫–≤—ã –ó–ê–ì–õ–ê–í–ù–´–ï ‚Ä¢ –ü—Ä–∏ –Ω–µ—Ö–≤–∞—Ç–∫–µ –º–µ—Å—Ç–∞ —É–º–µ–Ω—å—à–∞–µ—Ç—Å—è —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ –º–µ–∂–¥—É –±—É–∫–≤–∞–º–∏</div>

<script>
(function() {
    // ========== –ë–ê–ù–ö –°–õ–û–í (—Ä—É—Å—Å–∫–∏–µ —Å–ª–æ–≤–∞ —Å –∑–∞–≥–ª–∞–≤–Ω–æ–π —É–¥–∞—Ä–Ω–æ–π –±—É–∫–≤–æ–π) ==========
    const rawBank = [
        "–∞—ç—Ä–æ–ø–û—Ä—Ç—ã", "–±–ê–Ω—Ç—ã", "–±–û—Ä–æ–¥—É", "–±—É—Ö–≥–ê–ª—Ç–µ—Ä–æ–≤", "–≤–µ—Ä–æ–∏—Å–ø–æ–≤–ï–¥–∞–Ω–∏–µ",
        "–≤–æ–¥–æ–ø—Ä–æ–≤–û–¥", "–≥–∞–∑–æ–ø—Ä–æ–≤–û–¥", "–≥—Ä–∞–∂–¥–ê–Ω—Å—Ç–≤–æ", "–¥–µ—Ñ–ò—Å", "–¥–µ—à–µ–≤–ò–∑–Ω–∞",
        "–¥–∏—Å–ø–∞–Ω—Å–ï—Ä", "–¥–æ–≥–æ–≤–æ—Ä—ë–Ω–Ω–æ—Å—Ç—å", "–¥–æ–∫—É–º–ï–Ω—Ç", "–¥–æ—Å–£–≥", "–µ—Ä–µ—Ç–ò–∫",
        "–∂–∞–ª—é–∑–ò", "–∑–Ω–ê—á–∏–º–æ—Å—Ç—å", "–ò–∫—Å—ã", "–∫–∞—Ç–∞–ª–û–≥", "–∫–≤–∞—Ä—Ç–ê–ª",
        "–∫–∏–ª–æ–º–ï—Ç—Ä", "–∫–û–Ω—É—Å–æ–≤", "–∫–æ—Ä–´—Å—Ç—å", "–∫—Ä–ê–Ω—ã", "–∫—Ä–µ–º–ï–Ω—å",
        "–∫—Ä–µ–º–Ω–Ø", "–ª–ï–∫—Ç–æ—Ä–æ–≤", "–ª–û–∫—Ç—è", "–ª—ã–∂–Ω–Ø", "–º–ï—Å—Ç–Ω–æ—Å—Ç–µ–π",
        "–Ω–∞–º–ï—Ä–µ–Ω–∏–µ", "–Ω–ï–¥—Ä—É–≥", "–Ω–µ–¥–£–≥", "–Ω–µ–∫—Ä–æ–ª–û–≥", "–Ω–ï–Ω–∞–≤–∏—Å—Ç—å",
        "–Ω–µ—Ñ—Ç–µ–ø—Ä–æ–≤–û–¥", "–Ω–æ–≤–æ—Å—Ç–ï–π", "–Ω–û–≥—Ç—è", "–û—Ç–∑—ã–≤ (–æ –∫–Ω–∏–≥–µ)", "–æ—Ç–∑–´–≤ (–ø–æ—Å–ª–∞ –∏–∑ —Å—Ç—Ä–∞–Ω—ã)",
        "–û—Ç—Ä–æ—á–µ—Å—Ç–≤–æ", "–ø–∞—Ä—Ç–ï—Ä", "–ø–æ—Ä—Ç—Ñ–ï–ª—å", "–ø—Ä–∏–¥–ê–Ω–æ–µ", "–ø—Ä–∏–∑–´–≤",
        "—Å–≤–Å–∫–ª–∞", "—Å–∏—Ä–û—Ç—ã", "—Å–æ–∑–´–≤", "—Å–æ—Å—Ä–µ–¥–æ—Ç–û—á–µ–Ω–∏–µ", "—Å—Ä–ï–¥—Å—Ç–≤–∞",
        "—Å—Ç–ê—Ç—É—è", "—Å—Ç–æ–ª–Ø—Ä", "—Ç–∞–º–û–∂–Ω—è", "—Ç–û—Ä—Ç—ã", "—Ç–£—Ñ–ª—è",
        "—Ü–µ–º–ï–Ω—Ç", "—Ü–ï–Ω—Ç–Ω–µ—Ä", "—Ü–µ–ø–û—á–∫–∞", "—à–ê—Ä—Ñ—ã", "—à–æ—Ñ–Å—Ä",
        "—ç–∫—Å–ø–ï—Ä—Ç", "–≤–µ—Ä–Ω–ê", "–∑–Ω–ê—á–∏–º—ã–π", "–∫—Ä–∞—Å–ò–≤–µ–µ", "–∫–£—Ö–æ–Ω–Ω—ã–π",
        "–ª–æ–≤–∫–ê", "–º–æ–∑–∞–ò—á–Ω—ã–π", "–æ–ø—Ç–û–≤—ã–π", "–ø—Ä–æ–∑–æ—Ä–ª–ò–≤—ã–π", "–ø—Ä–æ–∑–æ—Ä–ª–ò–≤–∞",
        "—Å–ª–ò–≤–æ–≤—ã–π", "–±—Ä–∞–ª–ê—Å—å", "–≤–∑—è–ª–ê", "–≤–∑—è–ª–ê—Å—å", "–≤–ª–∏–ª–ê—Å—å",
        "–≤–æ—Ä–≤–∞–ª–ê—Å—å", "–≤–æ—Å–ø—Ä–∏–Ω–Ø—Ç—å", "–≤–æ—Å—Å–æ–∑–¥–∞–ª–ê", "–≤—Ä—É—á–ò—Ç", "–≥–Ω–∞–ª–ê",
        "–≥–Ω–∞–ª–ê—Å—å", "–¥–æ–±—Ä–∞–ª–ê", "–¥–æ–±—Ä–∞–ª–ê—Å—å", "–¥–æ–∂–¥–∞–ª–ê—Å—å", "–¥–æ–∑–≤–æ–Ω–ò—Ç—Å—è",
        "–¥–æ–∑–ò—Ä–æ–≤–∞—Ç—å", "–∂–¥–∞–ª–ê", "–∑–∞–∫–£–ø–æ—Ä–∏—Ç—å", "–∑–∞–Ω–Ø—Ç—å", "–∑–∞–ø–µ—Ä–ª–ê",
        "–∑–∞–ø–ª–æ–º–±–∏—Ä–æ–≤–ê—Ç—å", "–∑–∞—â–µ–º–ò—Ç", "–∑–≤–∞–ª–ê", "–∑–≤–æ–Ω–ò—Ç", "–∫–ê—à–ª—è–Ω—É—Ç—å",
        "–∫–ª–ê–ª–∞", "–∫–ª–ï–∏—Ç—å", "–∫—Ä–∞–ª–ê—Å—å", "–∫—Ä–æ–≤–æ—Ç–æ—á–ò—Ç—å", "–ª–≥–∞–ª–ê",
        "–ª–∏–ª–ê", "–ª–∏–ª–ê—Å—å", "–Ω–∞–¥–µ–ª–ò—Ç", "–Ω–∞–¥–æ—Ä–≤–∞–ª–ê—Å—å", "–Ω–∞–∑–≤–∞–ª–ê—Å—å",
        "–Ω–∞–∫—Ä–µ–Ω–ò—Ç—Å—è", "–Ω–∞–ª–∏–ª–ê", "–Ω–∞—Ä–≤–∞–ª–ê", "–Ω–∞—á–ê—Ç—å", "–Ω–ê—á–∞–ª",
        "–Ω–∞—á–∞–ª–ê", "–Ω–ê—á–∞–ª–∏", "–æ–±–∑–≤–æ–Ω–ò—Ç", "–æ–±–ª–µ–≥—á–ò—Ç—å", "–æ–±–ª–∏–ª–ê—Å—å",
        "–æ–±–Ω—è–ª–ê—Å—å", "–æ–±–æ–≥–Ω–∞–ª–ê", "–æ–±–æ–¥—Ä–∞–ª–ê", "–æ–±–æ–¥—Ä–ò—Ç—å", "–æ–±–æ–¥—Ä–ò—Ç—å—Å—è",
        "–æ–±–æ–¥—Ä–ò—Ç—Å—è", "–æ–±–æ—Å—Ç—Ä–ò—Ç—å", "–æ–¥–æ–ª–∂–ò—Ç—å", "–æ–¥–æ–ª–∂–ò—Ç", "–æ–∑–ª–û–±–∏—Ç—å",
        "–æ–∫–ª–ï–∏—Ç—å", "–æ–∫—Ä—É–∂–ò—Ç", "–æ–ø–û—à–ª–∏—Ç—å", "–æ—Å–≤–ï–¥–æ–º–∏—Ç—å—Å—è", "–æ—Å–≤–ï–¥–æ–º–∏—Ç—Å—è",
        "–æ—Ç–±—ã–ª–ê", "–æ—Ç–¥–∞–ª–ê", "–æ—Ç–∫–£–ø–æ—Ä–∏—Ç—å", "–æ–∑–≤–ê–ª–∞", "–æ—Ç–æ–∑–≤–∞–ª–ê—Å—å",
        "–ø–µ—Ä–µ–∑–≤–æ–Ω–ò—Ç", "–ø–µ—Ä–µ–ª–∏–ª–ê", "–ø–ª–æ–¥–æ–Ω–æ—Å–ò—Ç—å", "–ø–ª–æ–º–±–∏—Ä–æ–≤–ê—Ç—å", "–ø–æ–≤—Ç–æ—Ä–ò—Ç",
        "–ø–æ–∑–≤–∞–ª–ê", "–ø–æ–∑–≤–æ–Ω–ò—Ç", "–ø–æ–ª–∏–ª–ê", "–ø–æ–ª–æ–∂–ò—Ç—å", "–ø–æ–ª–æ–∂–ò–ª",
        "–ø–æ–Ω–Ø—Ç—å", "–ø–æ–Ω—è–ª–ê", "–ø–æ—Å–ª–ê–ª–∞", "–ø—Ä–∏–±–´—Ç—å", "–ø—Ä–ò–±—ã–ª",
        "–ø—Ä–∏–±—ã–ª–ê", "–ø—Ä–ò–±—ã–ª–∏", "–ø—Ä–∏–Ω–Ø—Ç—å", "–ø—Ä–ò–Ω—è–ª", "–ø—Ä–∏–Ω—è–ª–ê",
        "–ø—Ä–ò–Ω—è–ª–∏", "—Ä–≤–∞–ª–ê", "—Å–≤–µ—Ä–ª–ò—Ç", "—Å–Ω—è–ª–ê", "—Å–æ–∑–¥–∞–ª–ê",
        "—Å–æ—Ä–≤–∞–ª–ê", "—É–±—Ä–∞–ª–ê", "—É–≥–ª—É–±–ò—Ç—å", "—É–∫—Ä–µ–ø–ò—Ç", "—á–ï—Ä–ø–∞—Ç—å",
        "—â–µ–º–ò—Ç", "—â–Å–ª–∫–∞—Ç—å", "–¥–æ–≤–µ–∑–Å–Ω–Ω—ã–π", "–∑–ê–≥–Ω—É—Ç—ã–π", "–∑–ê–Ω—è—Ç—ã–π",
        "–∑–∞–Ω—è—Ç–ê", "–∑–ê–ø–µ—Ä—Ç—ã–π", "–∑–∞—Å–µ–ª–Å–Ω–Ω—ã–π", "–∑–∞—Å–µ–ª–µ–Ω–ê", "–∫—Ä–æ–≤–æ—Ç–æ—á–ê—â–∏–π",
        "–Ω–∞–∂–ò–≤—à–∏–π", "–Ω–∞–ª–ò–≤—à–∏–π", "–Ω–∞–Ω–Ø–≤—à–∏–π—Å—è", "–Ω–∞—á–ê–≤—à–∏–π", "–Ω–ê—á–∞—Ç—ã–π",
        "–Ω–∏–∑–≤–µ–¥–Å–Ω–Ω—ã–π", "–æ–±–ª–µ–≥—á–Å–Ω–Ω—ã–π", "–æ–±–æ–¥—Ä–Å–Ω–Ω—ã–π", "–æ–±–æ—Å—Ç—Ä–Å–Ω–Ω—ã–π", "–æ—Ç–∫–ª—é—á–Å–Ω–Ω—ã–π",
        "–ø–æ–≤—Ç–æ—Ä–Å–Ω–Ω—ã–π", "–ø–æ–¥–µ–ª–Å–Ω–Ω—ã–π", "–ø–æ–Ω–Ø–≤—à–∏–π", "–ø—Ä–ò–Ω—è—Ç—ã–π", "–ø—Ä–∏–Ω—è—Ç–ê",
        "–ø—Ä–∏—Ä—É—á–Å–Ω–Ω—ã–π", "–ø—Ä–æ–∂–ò–≤—à–∏–π", "—Å–Ω—è—Ç–ê", "—Å–û–≥–Ω—É—Ç—ã–π", "—É–≥–ª—É–±–ª–Å–Ω–Ω—ã–π",
        "–∑–∞–∫–£–ø–æ—Ä–∏–≤", "–Ω–∞—á–ê–≤", "–Ω–∞—á–ê–≤—à–∏—Å—å", "–æ—Ç–¥–ê–≤", "–ø–æ–Ω–Ø–≤",
        "–ø—Ä–∏–±–´–≤", "—Å–æ–∑–¥–ê–≤", "–≤–û–≤—Ä–µ–º—è", "–¥–û–≤–µ—Ä—Ö—É", "–¥–û–Ω–∏–∑—É",
        "–¥–û—Å—É—Ö–∞", "–∑–ê—Å–≤–µ—Ç–ª–æ", "–∫—Ä–∞—Å–ò–≤–µ–µ", "–Ω–∞–¥–û–ª–≥–æ", "–Ω–µ–Ω–∞–¥–û–ª–≥–æ"
    ];

    // –ü–∞—Ä—Å–∏–º –±–∞–Ω–∫: –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Å–ª–æ–≤–∞ –Ω–∞—Ö–æ–¥–∏–º –∏–Ω–¥–µ–∫—Å –∑–∞–≥–ª–∞–≤–Ω–æ–π –±—É–∫–≤—ã (—É–¥–∞—Ä–µ–Ω–∏–µ)
    function parseBank() {
        return rawBank.map(rawWord => {
            let word = rawWord.trim().replace(/,$/, '');
            let stressIndex = -1;
            let normalizedWord = '';

            for (let i = 0; i < word.length; i++) {
                const char = word[i];
                // –ï—Å–ª–∏ –±—É–∫–≤–∞ –∑–∞–≥–ª–∞–≤–Ω–∞—è –∏ —ç—Ç–æ –∏–º–µ–Ω–Ω–æ –±—É–∫–≤–∞ (–Ω–µ —Ü–∏—Ñ—Ä–∞/–∑–Ω–∞–∫)
                if (char !== char.toLowerCase() && char.toLowerCase() !== char.toUpperCase()) {
                    stressIndex = i;
                    normalizedWord += char;
                } else {
                    normalizedWord += char;
                }
            }

            // –ï—Å–ª–∏ –∑–∞–≥–ª–∞–≤–Ω–∞—è –Ω–µ –Ω–∞–π–¥–µ–Ω–∞ ‚Äî —Å—Ç–∞–≤–∏–º –Ω–∞ –ø–µ—Ä–≤—É—é –≥–ª–∞—Å–Ω—É—é (—Ä–µ–¥–∫–∏–π —Å–ª—É—á–∞–π)
            if (stressIndex === -1) {
                const vowels = ['–∞', '–µ', '—ë', '–∏', '–æ', '—É', '—ã', '—ç', '—é', '—è'];
                for (let i = 0; i < normalizedWord.length; i++) {
                    if (vowels.includes(normalizedWord[i].toLowerCase())) {
                        stressIndex = i;
                        break;
                    }
                }
                if (stressIndex === -1) stressIndex = 0;
            }

            return {
                word: normalizedWord,      // –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π —Ä–µ–≥–∏—Å—Ç—Ä (–¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –∏–Ω–¥–µ–∫—Å–∞)
                stress: stressIndex
            };
        });
    }

    const bank = parseBank();

    let currentItem = bank[0];
    let score = 0;
    let canAnswer = true;

    const wordDiv = document.getElementById("word");
    const scoreSpan = document.getElementById("score");
    const messageDiv = document.getElementById("message");
    const inputField = document.getElementById("answerInput");
    const nextBtn = document.getElementById("nextBtn");

    // –§—É–Ω–∫—Ü–∏—è –ø–æ–¥–≥–æ–Ω–∫–∏ —Ç–æ–ª—å–∫–æ –º–µ–∂–±—É–∫–≤–µ–Ω–Ω–æ–≥–æ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏—è (—à—Ä–∏—Ñ—Ç –Ω–µ —Ç—Ä–æ–≥–∞–µ–º)
    function fitWordToContainer() {
        // –°–±—Ä–∞—Å—ã–≤–∞–µ–º –∫ –±–∞–∑–æ–≤—ã–º —Å—Ç–∏–ª—è–º –∏–∑ CSS
        wordDiv.style.fontSize = '';        // –≤–µ—Ä–Ω—ë—Ç—Å—è –∫ 4rem (–∏–∑ CSS)
        wordDiv.style.letterSpacing = '';   // –≤–µ—Ä–Ω—ë—Ç—Å—è –∫ 12px (–∏–∑ CSS)

        // –î–∞—ë–º –±—Ä–∞—É–∑–µ—Ä—É –æ–±–Ω–æ–≤–∏—Ç—å—Å—è
        setTimeout(() => {
            const containerWidth = wordDiv.parentElement.clientWidth;
            let wordWidth = wordDiv.scrollWidth;

            // –ï—Å–ª–∏ —Å–ª–æ–≤–æ —É–∂–µ –ø–æ–º–µ—â–∞–µ—Ç—Å—è ‚Äî –æ—Ç–ª–∏—á–Ω–æ
            if (wordWidth <= containerWidth) return;

            // –ü–æ–ª—É—á–∞–µ–º —Ç–µ–∫—É—â–∏–π letter-spacing –ø–æ—Å–ª–µ —Å–±—Ä–æ—Å–∞
            let currentLetterSpacing = parseFloat(getComputedStyle(wordDiv).letterSpacing);
            if (isNaN(currentLetterSpacing)) currentLetterSpacing = 12;

            // –£–º–µ–Ω—å—à–∞–µ–º letter-spacing –¥–æ –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–≥–æ (–Ω–∞–ø—Ä–∏–º–µ—Ä, -2px)
            const minSpacing = -30;
            let spacing = currentLetterSpacing;
            while (wordWidth > containerWidth && spacing > minSpacing) {
                spacing -= 1; // —à–∞–≥ 1px
                wordDiv.style.letterSpacing = spacing + 'px';
                wordWidth = wordDiv.scrollWidth;
            }

            // –ï—Å–ª–∏ —Å–ª–æ–≤–æ –≤—Å—ë –µ—â—ë –Ω–µ –≤–ª–µ–∑–∞–µ—Ç ‚Äî –æ—Å—Ç–∞–≤–ª—è–µ–º –∫–∞–∫ –µ—Å—Ç—å (–æ–±—Ä–µ–∂–µ—Ç—Å—è –ø–æ overflow hidden)
        }, 10);
    }

    // –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å–ª–æ–≤–∞: –≤—Å–µ –±—É–∫–≤—ã –ó–ê–ì–õ–ê–í–ù–´–ï, –±–µ–∑ –≤—ã–¥–µ–ª–µ–Ω–∏—è —É–¥–∞—Ä–µ–Ω–∏—è
    function showNormalWord(item) {
        wordDiv.innerHTML = "";
        const word = item.word;
        for (let i = 0; i < word.length; i++) {
            const span = document.createElement("span");
            span.innerText = word[i].toUpperCase();   // –≤—Å–µ –∑–∞–≥–ª–∞–≤–Ω—ã–µ
            span.classList.add("letter");
            wordDiv.appendChild(span);
        }
        makeLettersClickable();
        fitWordToContainer();   // –ø–æ–¥–≥–æ–Ω—è–µ–º —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ –º–µ–∂–¥—É –±—É–∫–≤–∞–º–∏
    }

    // –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å–ª–æ–≤–∞ —Å –≤—ã–¥–µ–ª–µ–Ω–Ω—ã–º —É–¥–∞—Ä–µ–Ω–∏–µ–º (–ø—Ä–∏ –æ—à–∏–±–∫–µ)
    function showWordWithAccent(item) {
        wordDiv.innerHTML = "";
        const word = item.word;
        for (let i = 0; i < word.length; i++) {
            const span = document.createElement("span");
            span.innerText = word[i].toUpperCase();   // –≤—Å–µ –∑–∞–≥–ª–∞–≤–Ω—ã–µ
            span.classList.add("letter");
            if (i === item.stress) {
                span.classList.add("wrong-highlight"); // –∫—Ä–∞—Å–Ω—ã–π –∫—Ä—É–∂–æ–∫
            }
            wordDiv.appendChild(span);
        }
        makeLettersClickable();
        fitWordToContainer();   // –ø–æ–¥–≥–æ–Ω—è–µ–º —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ –º–µ–∂–¥—É –±—É–∫–≤–∞–º–∏
    }

    function loadNewWord() {
        const randomIndex = Math.floor(Math.random() * bank.length);
        currentItem = bank[randomIndex];
        showNormalWord(currentItem);
        canAnswer = true;
        inputField.value = "";
        messageDiv.innerText = `–ù–æ–≤–æ–µ —Å–ª–æ–≤–æ (${currentItem.word.length} –±—É–∫–≤)`;
    }

    function handleCorrect() {
        score++;
        scoreSpan.innerText = score;
        messageDiv.innerText = "‚úÖ –í–µ—Ä–Ω–æ! –ó–∞–≥—Ä—É–∂–∞–µ–º —Å–ª–µ–¥—É—é—â–µ–µ...";
        setTimeout(() => {
            loadNewWord();
        }, 500);
    }

    function handleWrong() {
        if (!canAnswer) return;
        canAnswer = false;
        const correctLetter = currentItem.word[currentItem.stress].toUpperCase();
        messageDiv.innerText = `‚ùå –ù–µ–≤–µ—Ä–Ω–æ. –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –±—É–∫–≤–∞: ¬´${correctLetter}¬ª (–ø–æ–∑–∏—Ü–∏—è ${currentItem.stress + 1})`;
        showWordWithAccent(currentItem);
    }

    function checkAnswer(selectedIndex) {
        if (!canAnswer) {
            messageDiv.innerText = "‚è≥ –≠—Ç–æ —Å–ª–æ–≤–æ —É–∂–µ –∑–∞–≤–µ—Ä—à–µ–Ω–æ. –ù–∞–∂–º–∏ '‚Üª' –¥–ª—è –Ω–æ–≤–æ–≥–æ";
            return;
        }
        if (selectedIndex === currentItem.stress) {
            handleCorrect();
        } else {
            handleWrong();
        }
    }

    function makeLettersClickable() {
        const letters = document.querySelectorAll('.letter');
        letters.forEach((letter, index) => {
            letter.onclick = () => {
                checkAnswer(index);
            };
        });
    }

    function handleInput() {
        const val = inputField.value.trim();
        if (val === "") return;
        const num = parseInt(val, 10);
        if (isNaN(num) || num < 1 || num > currentItem.word.length) {
            messageDiv.innerText = `‚ùó –í–≤–µ–¥–∏ —á–∏—Å–ª–æ –æ—Ç 1 –¥–æ ${currentItem.word.length}`;
            inputField.value = "";
            return;
        }
        checkAnswer(num - 1);
        inputField.value = "";
    }

    inputField.addEventListener("keypress", (e) => {
        if (e.key === "Enter") handleInput();
    });

    nextBtn.addEventListener("click", loadNewWord);

    // –°—Ç–∞—Ä—Ç
    loadNewWord();
    scoreSpan.innerText = "0";

    // –ü—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Ä–∞–∑–º–µ—Ä–æ–≤ –æ–∫–Ω–∞ –ø–µ—Ä–µ—Å—á–∏—Ç—ã–≤–∞–µ–º –¥–ª—è —Ç–µ–∫—É—â–µ–≥–æ —Å–ª–æ–≤–∞
    window.addEventListener('resize', () => {
        if (currentItem) {
            if (wordDiv.querySelector('.wrong-highlight')) {
                showWordWithAccent(currentItem);
            } else {
                showNormalWord(currentItem);
            }
        }
    });
})();
</script>
</body>
</html>
