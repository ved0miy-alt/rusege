<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>–ï–ì–≠ ‚Äî –£–¥–∞—Ä–µ–Ω–∏–µ (MiniApp)</title>
<style>
* { box-sizing: border-box; font-family: -apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,sans-serif; margin:0; padding:0; }
body { background:#000; color:#fff; display:flex; flex-direction:column; height:100vh; }
.top { text-align:center; padding:12px 8px; font-size:1rem; }
.word { flex:1; display:flex; justify-content:center; align-items:center; white-space:nowrap; overflow:hidden; font-weight:600; transition:letter-spacing 0.1s ease; }
.letter { display:inline-block; padding:6px; margin:2px; border-radius:50%; cursor:pointer; user-select:none; transition:0.2s; }
.wrong-highlight { background:#ff453a; box-shadow:0 0 8px #ff453a; }
.message { text-align:center; font-size:0.95rem; min-height:24px; padding:6px; color:#2AABEE; }
.bottom { padding:12px; display:flex; gap:8px; align-items:center; flex-wrap:wrap; justify-content:center; }
.score { min-width:50px; height:50px; background:#1c1c1e; border-radius:50%; display:flex; justify-content:center; align-items:center; font-size:1.3rem; border:2px solid #333; color:#2AABEE; }
.input-box { flex:1 1 150px; }
.input-box input { width:100%; padding:12px; border-radius:35px; border:none; background:#1c1c1e; color:white; text-align:center; font-size:1rem; }
.menu { width:50px; height:50px; border-radius:50%; background:#1c1c1e; display:flex; justify-content:center; align-items:center; font-size:22px; border:2px solid #333; color:#2AABEE; cursor:pointer; }
@media (max-width: 360px) {
  .letter { padding:4px; margin:1px; }
  .input-box input { font-size:0.95rem; padding:10px; }
  .score { min-width:45px; height:45px; font-size:1.1rem; }
  .menu { width:45px; height:45px; font-size:20px; }
}
</style>
</head>
<body>

<div class="top">üéì –ï–ì–≠ ‚Äî –æ—Ä—Ñ–æ—ç–ø–∏—è</div>
<div class="word" id="word"></div>
<div class="message" id="message"></div>

<div class="bottom">
  <div class="score" id="score">0</div>
  <div class="input-box">
    <input type="text" id="answerInput" inputmode="numeric" pattern="[0-9]*" placeholder="–ù–æ–º–µ—Ä —É–¥–∞—Ä–Ω–æ–π –±—É–∫–≤—ã">
  </div>
  <div class="menu" id="nextBtn">‚Üª</div>
</div>

<script src="https://telegram.org/js/telegram-web-app.js"></script>
<script>
// Telegram WebApp
const tg = window.Telegram.WebApp;
tg.expand();
tg.ready();

// ======== –ë–∞–Ω–∫ —Å–ª–æ–≤ —Å —É–¥–∞—Ä–µ–Ω–∏–µ–º (–∑–∞–≥–ª–∞–≤–Ω–∞—è –±—É–∫–≤–∞) ========
const rawBank = [
  "–∞—ç—Ä–æ–ø–û—Ä—Ç—ã", "–±–ê–Ω—Ç—ã", "–±–û—Ä–æ–¥—É", "–±—É—Ö–≥–ê–ª—Ç–µ—Ä–æ–≤", "–≤–µ—Ä–æ–∏—Å–ø–æ–≤–ï–¥–∞–Ω–∏–µ",
        "–≤–æ–¥–æ–ø—Ä–æ–≤–û–¥", "–≥–∞–∑–æ–ø—Ä–æ–≤–û–¥", "–≥—Ä–∞–∂–¥–ê–Ω—Å—Ç–≤–æ", "–¥–µ—Ñ–ò—Å", "–¥–µ—à–µ–≤–ò–∑–Ω–∞",
        "–¥–∏—Å–ø–∞–Ω—Å–ï—Ä", "–¥–æ–≥–æ–≤–æ—Ä—ë–Ω–Ω–æ—Å—Ç—å", "–¥–æ–∫—É–º–ï–Ω—Ç", "–¥–æ—Å–£–≥", "–µ—Ä–µ—Ç–ò–∫",
        "–∂–∞–ª—é–∑–ò", "–∑–Ω–ê—á–∏–º–æ—Å—Ç—å", "–ò–∫—Å—ã", "–∫–∞—Ç–∞–ª–û–≥", "–∫–≤–∞—Ä—Ç–ê–ª",
        "–∫–∏–ª–æ–º–ï—Ç—Ä", "–∫–û–Ω—É—Å–æ–≤", "–∫–æ—Ä–´—Å—Ç—å", "–∫—Ä–ê–Ω—ã", "–∫—Ä–µ–º–ï–Ω—å",
        "–∫—Ä–µ–º–Ω–Ø", "–ª–ï–∫—Ç–æ—Ä–æ–≤", "–ª–û–∫—Ç—è", "–ª—ã–∂–Ω–Ø", "–º–ï—Å—Ç–Ω–æ—Å—Ç–µ–π",
        "–Ω–∞–º–ï—Ä–µ–Ω–∏–µ", "–Ω–ï–¥—Ä—É–≥", "–Ω–µ–¥–£–≥", "–Ω–µ–∫—Ä–æ–ª–û–≥", "–Ω–ï–Ω–∞–≤–∏—Å—Ç—å",
        "–Ω–µ—Ñ—Ç–µ–ø—Ä–æ–≤–û–¥", "–Ω–æ–≤–æ—Å—Ç–ï–π", "–Ω–û–≥—Ç—è", "–û—Ç–∑—ã–≤ (–æ –∫–Ω–∏–≥–µ)", "–æ—Ç–∑–´–≤ (–ø–æ—Å–ª–∞ –∏–∑ —Å—Ç—Ä–∞–Ω—ã)",
        "–û—Ç—Ä–æ—á–µ—Å—Ç–≤–æ", "–ø–∞—Ä—Ç–ï—Ä", "–ø–æ—Ä—Ç—Ñ–ï–ª—å", "–ø—Ä–∏–¥–ê–Ω–æ–µ", "–ø—Ä–∏–∑–´–≤",
        "—Å–≤–Å–∫–ª–∞", "—Å–∏—Ä–û—Ç—ã", "—Å–æ–∑–´–≤", "—Å–æ—Å—Ä–µ–¥–æ—Ç–û—á–µ–Ω–∏–µ", "—Å—Ä–ï–¥—Å—Ç–≤–∞",
        "—Å—Ç–ê—Ç—É—è", "—Å—Ç–æ–ª–Ø—Ä", "—Ç–∞–º–û–∂–Ω—è", "—Ç–û—Ä—Ç—ã", "—Ç–£—Ñ–ª—è",
        "—Ü–µ–º–ï–Ω—Ç", "—Ü–ï–Ω—Ç–Ω–µ—Ä", "—Ü–µ–ø–û—á–∫–∞", "—à–ê—Ä—Ñ—ã", "—à–æ—Ñ–Å—Ä",
        "—ç–∫—Å–ø–ï—Ä—Ç", "–≤–µ—Ä–Ω–ê", "–∑–Ω–ê—á–∏–º—ã–π", "–∫—Ä–∞—Å–ò–≤–µ–µ", "–∫–£—Ö–æ–Ω–Ω—ã–π",
        "–ª–æ–≤–∫–ê", "–º–æ–∑–∞–ò—á–Ω—ã–π", "–æ–ø—Ç–û–≤—ã–π", "–ø—Ä–æ–∑–æ—Ä–ª–ò–≤—ã–π", "–ø—Ä–æ–∑–æ—Ä–ª–ò–≤–∞",
        "—Å–ª–ò–≤–æ–≤—ã–π", "–±—Ä–∞–ª–ê—Å—å", "–≤–∑—è–ª–ê", "–≤–∑—è–ª–ê—Å—å", "–≤–ª–∏–ª–ê—Å—å",
        "–≤–æ—Ä–≤–∞–ª–ê—Å—å", "–≤–æ—Å–ø—Ä–∏–Ω–Ø—Ç—å", "–≤–æ—Å—Å–æ–∑–¥–∞–ª–ê", "–≤—Ä—É—á–ò—Ç", "–≥–Ω–∞–ª–ê",
        "–≥–Ω–∞–ª–ê—Å—å", "–¥–æ–±—Ä–∞–ª–ê", "–¥–æ–±—Ä–∞–ª–ê—Å—å", "–¥–æ–∂–¥–∞–ª–ê—Å—å", "–¥–æ–∑–≤–æ–Ω–ò—Ç—Å—è",
        "–¥–æ–∑–ò—Ä–æ–≤–∞—Ç—å", "–∂–¥–∞–ª–ê", "–∑–∞–∫–£–ø–æ—Ä–∏—Ç—å", "–∑–∞–Ω–Ø—Ç—å", "–∑–∞–ø–µ—Ä–ª–ê",
        "–∑–∞–ø–ª–æ–º–±–∏—Ä–æ–≤–ê—Ç—å", "–∑–∞—â–µ–º–ò—Ç", "–∑–≤–∞–ª–ê", "–∑–≤–æ–Ω–ò—Ç", "–∫–ê—à–ª—è–Ω—É—Ç—å",
        "–∫–ª–ê–ª–∞", "–∫–ª–ï–∏—Ç—å", "–∫—Ä–∞–ª–ê—Å—å", "–∫—Ä–æ–≤–æ—Ç–æ—á–ò—Ç—å", "–ª–≥–∞–ª–ê",
        "–ª–∏–ª–ê", "–ª–∏–ª–ê—Å—å", "–Ω–∞–¥–µ–ª–ò—Ç", "–Ω–∞–¥–æ—Ä–≤–∞–ª–ê—Å—å", "–Ω–∞–∑–≤–∞–ª–ê—Å—å",
        "–Ω–∞–∫—Ä–µ–Ω–ò—Ç—Å—è", "–Ω–∞–ª–∏–ª–ê", "–Ω–∞—Ä–≤–∞–ª–ê", "–Ω–∞—á–ê—Ç—å", "–Ω–ê—á–∞–ª",
        "–Ω–∞—á–∞–ª–ê", "–Ω–ê—á–∞–ª–∏", "–æ–±–∑–≤–æ–Ω–ò—Ç", "–æ–±–ª–µ–≥—á–ò—Ç—å", "–æ–±–ª–∏–ª–ê—Å—å",
        "–æ–±–Ω—è–ª–ê—Å—å", "–æ–±–æ–≥–Ω–∞–ª–ê", "–æ–±–æ–¥—Ä–∞–ª–ê", "–æ–±–æ–¥—Ä–ò—Ç—å", "–æ–±–æ–¥—Ä–ò—Ç—å—Å—è",
        "–æ–±–æ–¥—Ä–ò—Ç—Å—è", "–æ–±–æ—Å—Ç—Ä–ò—Ç—å", "–æ–¥–æ–ª–∂–ò—Ç—å", "–æ–¥–æ–ª–∂–ò—Ç", "–æ–∑–ª–û–±–∏—Ç—å",
        "–æ–∫–ª–ï–∏—Ç—å", "–æ–∫—Ä—É–∂–ò—Ç", "–æ–ø–û—à–ª–∏—Ç—å", "–æ—Å–≤–ï–¥–æ–º–∏—Ç—å—Å—è", "–æ—Å–≤–ï–¥–æ–º–∏—Ç—Å—è",
        "–æ—Ç–±—ã–ª–ê", "–æ—Ç–¥–∞–ª–ê", "–æ—Ç–∫–£–ø–æ—Ä–∏—Ç—å", "–æ–∑–≤–ê–ª–∞", "–æ—Ç–æ–∑–≤–∞–ª–ê—Å—å",
        "–ø–µ—Ä–µ–∑–≤–æ–Ω–ò—Ç", "–ø–µ—Ä–µ–ª–∏–ª–ê", "–ø–ª–æ–¥–æ–Ω–æ—Å–ò—Ç—å", "–ø–ª–æ–º–±–∏—Ä–æ–≤–ê—Ç—å", "–ø–æ–≤—Ç–æ—Ä–ò—Ç",
        "–ø–æ–∑–≤–∞–ª–ê", "–ø–æ–∑–≤–æ–Ω–ò—Ç", "–ø–æ–ª–∏–ª–ê", "–ø–æ–ª–æ–∂–ò—Ç—å", "–ø–æ–ª–æ–∂–ò–ª",
        "–ø–æ–Ω–Ø—Ç—å", "–ø–æ–Ω—è–ª–ê", "–ø–æ—Å–ª–ê–ª–∞", "–ø—Ä–∏–±–´—Ç—å", "–ø—Ä–ò–±—ã–ª",
        "–ø—Ä–∏–±—ã–ª–ê", "–ø—Ä–ò–±—ã–ª–∏", "–ø—Ä–∏–Ω–Ø—Ç—å", "–ø—Ä–ò–Ω—è–ª", "–ø—Ä–∏–Ω—è–ª–ê",
        "–ø—Ä–ò–Ω—è–ª–∏", "—Ä–≤–∞–ª–ê", "—Å–≤–µ—Ä–ª–ò—Ç", "—Å–Ω—è–ª–ê", "—Å–æ–∑–¥–∞–ª–ê",
        "—Å–æ—Ä–≤–∞–ª–ê", "—É–±—Ä–∞–ª–ê", "—É–≥–ª—É–±–ò—Ç—å", "—É–∫—Ä–µ–ø–ò—Ç", "—á–ï—Ä–ø–∞—Ç—å",
        "—â–µ–º–ò—Ç", "—â–Å–ª–∫–∞—Ç—å", "–¥–æ–≤–µ–∑–Å–Ω–Ω—ã–π", "–∑–ê–≥–Ω—É—Ç—ã–π", "–∑–ê–Ω—è—Ç—ã–π",
        "–∑–∞–Ω—è—Ç–ê", "–∑–ê–ø–µ—Ä—Ç—ã–π", "–∑–∞—Å–µ–ª–Å–Ω–Ω—ã–π", "–∑–∞—Å–µ–ª–µ–Ω–ê", "–∫—Ä–æ–≤–æ—Ç–æ—á–ê—â–∏–π",
        "–Ω–∞–∂–ò–≤—à–∏–π", "–Ω–∞–ª–ò–≤—à–∏–π", "–Ω–∞–Ω–Ø–≤—à–∏–π—Å—è", "–Ω–∞—á–ê–≤—à–∏–π", "–Ω–ê—á–∞—Ç—ã–π",
        "–Ω–∏–∑–≤–µ–¥–Å–Ω–Ω—ã–π", "–æ–±–ª–µ–≥—á–Å–Ω–Ω—ã–π", "–æ–±–æ–¥—Ä–Å–Ω–Ω—ã–π", "–æ–±–æ—Å—Ç—Ä–Å–Ω–Ω—ã–π", "–æ—Ç–∫–ª—é—á–Å–Ω–Ω—ã–π",
        "–ø–æ–≤—Ç–æ—Ä–Å–Ω–Ω—ã–π", "–ø–æ–¥–µ–ª–Å–Ω–Ω—ã–π", "–ø–æ–Ω–Ø–≤—à–∏–π", "–ø—Ä–ò–Ω—è—Ç—ã–π", "–ø—Ä–∏–Ω—è—Ç–ê",
        "–ø—Ä–∏—Ä—É—á–Å–Ω–Ω—ã–π", "–ø—Ä–æ–∂–ò–≤—à–∏–π", "—Å–Ω—è—Ç–ê", "—Å–û–≥–Ω—É—Ç—ã–π", "—É–≥–ª—É–±–ª–Å–Ω–Ω—ã–π",
        "–∑–∞–∫–£–ø–æ—Ä–∏–≤", "–Ω–∞—á–ê–≤", "–Ω–∞—á–ê–≤—à–∏—Å—å", "–æ—Ç–¥–ê–≤", "–ø–æ–Ω–Ø–≤",
        "–ø—Ä–∏–±–´–≤", "—Å–æ–∑–¥–ê–≤", "–≤–û–≤—Ä–µ–º—è", "–¥–û–≤–µ—Ä—Ö—É", "–¥–û–Ω–∏–∑—É",
        "–¥–û—Å—É—Ö–∞", "–∑–ê—Å–≤–µ—Ç–ª–æ", "–∫—Ä–∞—Å–ò–≤–µ–µ", "–Ω–∞–¥–û–ª–≥–æ", "–Ω–µ–Ω–∞–¥–û–ª–≥–æ"
];

// –ü–∞—Ä—Å–∏–º: –Ω–∞—Ö–æ–¥–∏–º –∏–Ω–¥–µ–∫—Å —É–¥–∞—Ä–Ω–æ–π –±—É–∫–≤—ã
function parseBank(bank){
  return bank.map(word=>{
    let stress=-1;
    for(let i=0;i<word.length;i++){
      if(word[i]!==word[i].toLowerCase()) stress=i;
    }
    if(stress===-1) stress=0;
    return {word:word, stress:stress};
  });
}

const bank = parseBank(rawBank);
let currentItem;
let score = 0;

const wordDiv = document.getElementById("word");
const messageDiv = document.getElementById("message");
const scoreEl = document.getElementById("score");
const input = document.getElementById("answerInput");
const nextBtn = document.getElementById("nextBtn");

// –ü–æ–¥–≥–æ–Ω–∫–∞ —Ä–∞–∑–º–µ—Ä–∞ –±—É–∫–≤ –ø–æ–¥ —à–∏—Ä–∏–Ω—É —ç–∫—Ä–∞–Ω–∞
function fitWord(){
  const letters = wordDiv.querySelectorAll(".letter");
  if(letters.length===0) return;
  let fontSize = window.innerWidth / (letters.length + 1);
  fontSize = Math.min(Math.max(fontSize*0.6,16),64); // min16px, max64px
  letters.forEach(l=>l.style.fontSize = fontSize+"px");
}

// –ü–æ–∫–∞–∑ —Å–ª–æ–≤–∞
function showWord(item){
  wordDiv.innerHTML="";
  item.word.split("").forEach((ch,i)=>{
    const span=document.createElement("span");
    span.className="letter";
    span.innerText=ch.toUpperCase();
    span.onclick=()=>check(i);
    wordDiv.appendChild(span);
  });
  setTimeout(fitWord,50);
}

// –ü–æ–∫–∞–∑ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –±—É–∫–≤—ã –ø—Ä–∏ –æ—à–∏–±–∫–µ
function showCorrect(){
  const letters=document.querySelectorAll(".letter");
  letters[currentItem.stress].classList.add("wrong-highlight");
}

// –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ—Ç–≤–µ—Ç–∞
function check(index){
  if(index===currentItem.stress){
    score++;
    scoreEl.innerText=score;
    messageDiv.innerText="‚úÖ –í–µ—Ä–Ω–æ!";
    setTimeout(loadNew,400);
  } else {
    messageDiv.innerText=`‚ùå –û—à–∏–±–∫–∞! –ü–æ–∑–∏—Ü–∏—è: ${currentItem.stress+1}`;
    showCorrect();
  }
}

// –ó–∞–≥—Ä—É–∑–∫–∞ –Ω–æ–≤–æ–≥–æ —Å–ª–æ–≤–∞
function loadNew(){
  currentItem = bank[Math.floor(Math.random()*bank.length)];
  showWord(currentItem);
  messageDiv.innerText="";
  input.value="";
  input.focus();
}

// –í–≤–æ–¥ —á–µ—Ä–µ–∑ input
input.addEventListener("keypress",e=>{
  if(e.key==="Enter"){
    const val=parseInt(input.value)-1;
    if(!isNaN(val) && val>=0 && val<currentItem.word.length) check(val);
    input.value="";
  }
});

// –ö–Ω–æ–ø–∫–∞ "—Å–ª–µ–¥—É—é—â–µ–µ —Å–ª–æ–≤–æ"
nextBtn.onclick=loadNew;

// –ü–æ–¥–≥–æ–Ω–∫–∞ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Ä–∞–∑–º–µ—Ä–∞ —ç–∫—Ä–∞–Ω–∞
window.addEventListener("resize",fitWord);

// –°—Ç–∞—Ä—Ç
scoreEl.innerText=score;
loadNew();
</script>

</body>
</html>
